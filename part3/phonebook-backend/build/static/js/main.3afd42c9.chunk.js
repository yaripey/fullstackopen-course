(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(37)},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(14),c=t.n(u),o=t(4),l=t(2),i=function(e){var n=e.currentSearch,t=e.searchChange;return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:n,onChange:t}))},m=function(e){var n=e.newNameHandler,t=e.newName,a=e.nameChange,u=e.newNumber,c=e.numberChange;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:t,onChange:a})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:u,onChange:c})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},f=function(e){var n=e.person,t=e.deleteContact;return r.a.createElement("li",null,n.name," ",n.number," ",r.a.createElement("button",{className:n.id,onClick:t},"Delete"))},s=function(e){var n=e.namesToShow,t=e.deleteContact;return r.a.createElement("ul",null,n.map((function(e){return r.a.createElement(f,{deleteContact:t,person:e,key:e.id})})))},d=t(3),h=t.n(d),b="/api/persons",v=function(){return h.a.get(b).then((function(e){return e.data}))},E=function(e){return h.a.post(b,e).then((function(e){return e.data}))},p=function(e,n){return h.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},w=function(e){return h.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},g=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"error"},n)},C=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],u=n[1],c=Object(a.useState)(""),f=Object(l.a)(c,2),d=f[0],h=f[1],b=Object(a.useState)(""),C=Object(l.a)(b,2),O=C[0],j=C[1],N=Object(a.useState)(""),S=Object(l.a)(N,2),k=S[0],y=S[1],T=Object(a.useState)(null),D=Object(l.a)(T,2),x=D[0],H=D[1];Object(a.useEffect)((function(){v().then((function(e){u(e)}))}),[]);var I=[];""===k?I=t:(I=t.filter((function(e){return-1!==e.name.toLowerCase().indexOf(k.toLowerCase())})),console.log(I));return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(g,{message:x}),r.a.createElement(i,{currentSearch:k,searchChange:function(e){y(e.target.value)}}),r.a.createElement("h2",null,"add a new"),r.a.createElement(m,{newNameHandler:function(e){e.preventDefault();var n=t.find((function(e){return e.name===d}));if(void 0!==n){if(window.confirm(n.name+" is already added to phonebook, replace the old number with a new one?")){var a=Object(o.a)(Object(o.a)({},n),{},{number:O});p(a.id,a).then((function(e){u(t.map((function(e){return e.id!==a.id?e:a})))})).catch((function(e){H("This user was already removed from server"),setTimeout((function(){return H(null)}),5e3),u(t.filter((function(e){return e.id!==a.id})))}))}}else{var r={name:d,number:O,id:t.length+1};E(r).then((function(e){u(t.concat(e)),h(""),j("")})),H("New user added"),setTimeout((function(){return H(null)}),5e3)}},newName:d,nameChange:function(e){h(e.target.value)},newNumber:O,numberChange:function(e){j(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(s,{namesToShow:I,deleteContact:function(e){if(window.confirm("Delete this user?")){var n=parseInt(e.target.className);w(n).then((function(e){u(t.filter((function(e){return e.id!==n})))}))}}}))};c.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.3afd42c9.chunk.js.map